<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gini-koefficient Simulator</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>Gini-koefficient Simulator</h1>
            <p class="subtitle">Udforsk hvordan skatter påvirker indkomstulighed</p>
            <div class="info-box">
                <span class="info-icon">ℹ️</span>
                <span>Gini-koefficienten måler indkomstulighed: <strong>0</strong> = perfekt lighed, <strong>1</strong> = perfekt ulighed</span>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Left Side: Charts -->
            <div class="charts-section">
                <!-- Before Tax Chart -->
                <div class="chart-container">
                    <h2>Før Skat</h2>
                    <div class="gini-display before-tax">
                        <span class="label">Gini-koefficient:</span>
                        <span class="value" id="gini-before">0.00</span>
                    </div>
                    <canvas id="chart-before"></canvas>
                </div>

                <!-- After Tax Chart -->
                <div class="chart-container">
                    <h2>Efter Skat</h2>
                    <div class="gini-display after-tax">
                        <span class="label">Gini-koefficient:</span>
                        <span class="value" id="gini-after">0.00</span>
                    </div>
                    <canvas id="chart-after"></canvas>
                    <div class="gini-change" id="gini-change">
                        Ingen ændring
                    </div>
                </div>
            </div>

            <!-- Right Side: Controls -->
            <div class="controls-section">
                <!-- Preset Scenarios -->
                <div class="control-group">
                    <h3>Hurtstart: Vælg et scenarie</h3>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-scenario="denmark">🇩🇰 Danmark</button>
                        <button class="preset-btn" data-scenario="usa">🇺🇸 USA</button>
                        <button class="preset-btn" data-scenario="sweden">🇸🇪 Sverige</button>
                        <button class="preset-btn" data-scenario="equal">⚖️ Perfekt Lighed</button>
                    </div>
                </div>

                <!-- Population Control -->
                <div class="control-group">
                    <h3>Befolkning</h3>
                    <label>
                        Antal personer: <span id="population-value">100</span>
                        <input type="range" id="population" min="50" max="1000" value="100" step="50">
                    </label>
                </div>

                <!-- Income Distribution -->
                <div class="control-group">
                    <h3>Indkomstfordeling</h3>
                    <p class="help-text">Vælg hvordan indkomsterne er fordelt i befolkningen</p>
                    <select id="distribution-type">
                        <option value="equal">⚖️ Ligeligt fordelt - Alle har næsten samme indkomst</option>
                        <option value="normal">📊 Normal fordeling - Mest i middelklassen (bell curve)</option>
                        <option value="skewed" selected>📈 Skæv fordeling - Mange fattige, få rige (realistisk)</option>
                        <option value="extreme">⚠️ Ekstrem ulighed - Meget få superrige</option>
                    </select>

                    <label>
                        Højeste indkomst: <span id="max-income-value">1,000,000</span> kr/år
                        <input type="range" id="max-income" min="500000" max="5000000" value="1000000" step="100000">
                        <p class="help-text mini">Den rigeste persons indkomst</p>
                    </label>

                    <!-- Income preview -->
                    <div class="income-preview" id="income-preview">
                        <div class="preview-label">Eksempel indkomster:</div>
                        <div class="preview-values" id="preview-values">
                            <span class="preview-item">Laveste: <strong>0 kr</strong></span>
                            <span class="preview-item">Median: <strong>300,000 kr</strong></span>
                            <span class="preview-item">Højeste: <strong>1,000,000 kr</strong></span>
                        </div>
                    </div>
                </div>

                <!-- Tax System -->
                <div class="control-group">
                    <h3>Skattesystem</h3>
                    <p class="help-text">Vælg en skatteprofil eller design dit eget system</p>

                    <!-- Tax Profile Selector -->
                    <div class="tax-profiles">
                        <button class="tax-profile-btn" data-profile="none">Ingen skat</button>
                        <button class="tax-profile-btn" data-profile="flat">Flad skat (25%)</button>
                        <button class="tax-profile-btn active" data-profile="progressive">Progressiv</button>
                    </div>

                    <!-- Tax Explanation Box -->
                    <div class="tax-explanation" id="tax-explanation">
                        <p class="help-text"><strong>Progressiv skat betyder:</strong> Jo mere du tjener, jo højere procent betaler du.</p>
                    </div>

                    <!-- Flat Tax Warning -->
                    <div class="flat-tax-warning" id="flat-tax-warning" style="display: none;">
                        <div class="warning-title">💡 Vidste du?</div>
                        <p><strong>Flad skat reducerer IKKE uligheden!</strong></p>
                        <p>Når alle betaler samme procent (fx 25%), bevares de relative forhold:</p>
                        <ul>
                            <li>Person med 100k får 75k tilbage (75%)</li>
                            <li>Person med 1M får 750k tilbage (75%)</li>
                            <li>Forholdet 10:1 er uændret!</li>
                        </ul>
                        <p><small>Derfor bruges progressiv skat til at reducere ulighed.</small></p>
                    </div>

                    <div id="tax-brackets" class="tax-brackets-container">
                        <!-- Tax brackets will be added dynamically -->
                    </div>

                    <button id="add-bracket" class="btn-add-bracket">+ Tilføj skattetrin</button>

                    <!-- Example Calculation -->
                    <div class="tax-example" id="tax-example">
                        <div class="example-title">📝 Eksempel:</div>
                        <div id="example-text">
                            En person der tjener <strong>500,000 kr</strong> betaler:
                            <ul>
                                <li>De første 50,000 kr: 8% = 4,000 kr</li>
                                <li>Næste 200,000 kr: 12% = 24,000 kr</li>
                                <li>Næste 250,000 kr: 15% = 37,500 kr</li>
                            </ul>
                            <strong>Total skat: 65,500 kr (13.1%)</strong><br>
                            <strong>Efter skat: 434,500 kr</strong>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="control-group actions">
                    <button id="calculate" class="btn-primary">Beregn Gini-koefficient</button>
                    <button id="reset" class="btn-secondary">Nulstil</button>
                </div>

                <!-- Tax System Comparison Info -->
                <div class="control-group tax-info-box">
                    <h3>📊 Hvorfor virker nogle skattesystemer bedre?</h3>
                    <div class="info-content">
                        <p><strong>Effekten af progressivitet:</strong></p>
                        <div class="comparison-grid">
                            <div class="comparison-item usa">
                                <span class="flag">🇺🇸</span>
                                <strong>USA</strong>
                                <div>10% → 24%</div>
                                <small>Lille spring = svag effekt</small>
                            </div>
                            <div class="comparison-item denmark">
                                <span class="flag">🇩🇰</span>
                                <strong>Danmark</strong>
                                <div>0% → 52%</div>
                                <small>Stort spring = god effekt</small>
                            </div>
                            <div class="comparison-item sweden">
                                <span class="flag">🇸🇪</span>
                                <strong>Sverige</strong>
                                <div>0% → 57%</div>
                                <small>Meget stort = stor effekt</small>
                            </div>
                        </div>
                        <p class="tip"><strong>💡 Tip:</strong> Jo større forskellen mellem laveste og højeste skatteprocent, desto mere reduceres uligheden!</p>
                    </div>
                </div>

                <!-- Educational Challenges -->
                <div class="control-group challenge-box">
                    <h3>💡 Udfordring</h3>
                    <p id="challenge-text">Prøv at reducere uligheden til under 0.30 ved kun at ændre skattesystemet!</p>
                </div>
            </div>
        </div>

        <!-- Real World Comparison -->
        <div class="comparison-section">
            <h3>Sammenligning med virkelige lande (2023)</h3>
            <div class="country-grid">
                <div class="country-card">
                    <span class="flag">🇩🇰</span>
                    <span class="country-name">Danmark</span>
                    <span class="country-gini">0.28</span>
                </div>
                <div class="country-card">
                    <span class="flag">🇸🇪</span>
                    <span class="country-name">Sverige</span>
                    <span class="country-gini">0.27</span>
                </div>
                <div class="country-card">
                    <span class="flag">🇩🇪</span>
                    <span class="country-name">Tyskland</span>
                    <span class="country-gini">0.32</span>
                </div>
                <div class="country-card">
                    <span class="flag">🇺🇸</span>
                    <span class="country-name">USA</span>
                    <span class="country-gini">0.41</span>
                </div>
                <div class="country-card">
                    <span class="flag">🇧🇷</span>
                    <span class="country-name">Brasilien</span>
                    <span class="country-gini">0.52</span>
                </div>
                <div class="country-card">
                    <span class="flag">🇿🇦</span>
                    <span class="country-name">Sydafrika</span>
                    <span class="country-gini">0.63</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/gini-calc.js"></script>
    <script src="js/chart-handler.js"></script>
    <script src="js/scenarios.js"></script>
    <script src="js/ui-controller.js"></script>
</body>
</html>
